{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Development\\\\QA\\\\OldQA\\\\web\\\\src\\\\components\\\\Subscriber\\\\InviteSubscriber.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Modal, ModalOverlay, ModalContent, ModalHeader, ModalFooter, ModalBody, ModalCloseButton, Button, Box, useDisclosure, Link } from \"@chakra-ui/react\";\nimport { Form, Formik } from \"formik\";\nimport { withApollo } from \"../../utils/withApollo\";\nimport { InputField } from \"../Inputs/InputField\";\nimport { useCreateSubMutation } from \"../../generated/graphql\";\nimport { toErrorMap } from \"../../utils/toErrorMap\";\n\nvar InviteSubscriber = function InviteSubscriber(_ref) {\n  _s();\n\n  var subLength = _ref.subLength;\n\n  var _useCreateSubMutation = useCreateSubMutation(),\n      _useCreateSubMutation2 = _slicedToArray(_useCreateSubMutation, 1),\n      createSub = _useCreateSubMutation2[0];\n\n  var _useDisclosure = useDisclosure(),\n      isOpen = _useDisclosure.isOpen,\n      onOpen = _useDisclosure.onOpen,\n      onClose = _useDisclosure.onClose;\n\n  if (subLength) {\n    return __jsx(React.Fragment, null, __jsx(Button, {\n      onClick: onOpen,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }\n    }, \"Invite a Contact\"), __jsx(Modal, {\n      closeOnOverlayClick: true,\n      isOpen: isOpen,\n      onClose: onClose,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }\n    }, __jsx(ModalOverlay, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }\n    }), __jsx(ModalContent, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 11\n      }\n    }, __jsx(ModalHeader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }\n    }, \"Invite a Contact\"), __jsx(ModalBody, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    }, \"You have reached your contacts limit under the free trial membership. Dont frett, upgrade your membership \", __jsx(Link, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 63\n      }\n    }, \"Here\")), __jsx(ModalFooter, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, __jsx(Button, {\n      onClick: onClose,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 15\n      }\n    }, \"Cancel\"))), __jsx(ModalFooter, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }\n    }, __jsx(Button, {\n      onClick: onClose,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }, \"Cancel\"))));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Button, {\n    onClick: onOpen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"Invite a Contact\"), __jsx(Modal, {\n    closeOnOverlayClick: false,\n    isOpen: isOpen,\n    onClose: onClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, __jsx(ModalOverlay, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }), __jsx(ModalContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, __jsx(ModalHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, \"Invite a Contact\"), __jsx(Formik, {\n    initialValues: {\n      name: \"\",\n      email: \"\"\n    },\n    onSubmit: /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values, _ref2) {\n        var _response$data, _response$data2;\n\n        var setErrors, response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setErrors = _ref2.setErrors;\n                _context.next = 3;\n                return createSub({\n                  variables: {\n                    input: values\n                  },\n                  update: function update(cache, _ref4) {\n                    var data = _ref4.data;\n\n                    if (!(data !== null && data !== void 0 && data.createSub.errors)) {\n                      cache.evict({\n                        fieldName: \"subs:{}\"\n                      });\n                    }\n                  }\n                });\n\n              case 3:\n                response = _context.sent;\n\n                if ((_response$data = response.data) !== null && _response$data !== void 0 && _response$data.createSub.errors) {\n                  setErrors(toErrorMap(response.data.createSub.errors));\n                  console.log(response.data.createSub.errors);\n                } else if ((_response$data2 = response.data) !== null && _response$data2 !== void 0 && _response$data2.createSub.sub) {}\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, function (_ref5) {\n    var isSubmitting = _ref5.isSubmitting;\n    return __jsx(Form, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, isSubmitting ? null : __jsx(ModalCloseButton, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 42\n      }\n    }), __jsx(ModalBody, {\n      pb: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, __jsx(InputField, {\n      name: \"name\",\n      placeholder: \"Name\",\n      label: \"Name\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }), __jsx(Box, {\n      mt: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    }, __jsx(InputField, {\n      name: \"email\",\n      placeholder: \"email\",\n      label: \"Email\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 23\n      }\n    }))), __jsx(ModalFooter, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 19\n      }\n    }, __jsx(Button, {\n      mr: 2,\n      type: \"submit\",\n      isLoading: isSubmitting,\n      background: \"blue\",\n      color: \"white\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, \"Send Invite\"), __jsx(Button, {\n      isLoading: isSubmitting,\n      onClick: onClose,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, \"Cancel\")));\n  }))));\n};\n\n_s(InviteSubscriber, \"fHvaCvvbjQe+rLB/yvsPr0x3arw=\", false, function () {\n  return [useCreateSubMutation, useDisclosure];\n});\n\n_c = InviteSubscriber;\nexport default withApollo({\n  ssr: false\n})(InviteSubscriber);\n\nvar _c;\n\n$RefreshReg$(_c, \"InviteSubscriber\");","map":{"version":3,"sources":["D:/Development/QA/OldQA/web/src/components/Subscriber/InviteSubscriber.tsx"],"names":["React","Modal","ModalOverlay","ModalContent","ModalHeader","ModalFooter","ModalBody","ModalCloseButton","Button","Box","useDisclosure","Link","Form","Formik","withApollo","InputField","useCreateSubMutation","toErrorMap","InviteSubscriber","subLength","createSub","isOpen","onOpen","onClose","name","email","values","setErrors","variables","input","update","cache","data","errors","evict","fieldName","response","console","log","sub","isSubmitting","ssr"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  Modal,\r\n  ModalOverlay,\r\n  ModalContent,\r\n  ModalHeader,\r\n  ModalFooter,\r\n  ModalBody,\r\n  ModalCloseButton,\r\n  Button,\r\n  Box,\r\n  useDisclosure,\r\n  Link,\r\n} from \"@chakra-ui/react\";\r\nimport { Form, Formik } from \"formik\";\r\nimport { withApollo } from \"../../utils/withApollo\";\r\nimport { InputField } from \"../Inputs/InputField\";\r\nimport { useCreateSubMutation } from \"../../generated/graphql\";\r\nimport { toErrorMap } from \"../../utils/toErrorMap\";\r\n\r\ninterface InviteSubscriberProps {\r\n  subLength: boolean;\r\n}\r\n\r\nconst InviteSubscriber: React.FC<InviteSubscriberProps> = ({ subLength }) => {\r\n  const [createSub] = useCreateSubMutation();\r\n  const { isOpen, onOpen, onClose } = useDisclosure();\r\n\r\n  if (subLength) {\r\n    return (\r\n      <>\r\n        <Button onClick={onOpen}>Invite a Contact</Button>\r\n\r\n        <Modal closeOnOverlayClick={true} isOpen={isOpen} onClose={onClose}>\r\n          <ModalOverlay />\r\n          <ModalContent>\r\n            <ModalHeader>Invite a Contact</ModalHeader>\r\n            <ModalBody>\r\n              You have reached your contacts limit under the free trial\r\n              membership. Dont frett, upgrade your membership <Link>Here</Link>\r\n            </ModalBody>\r\n            <ModalFooter>\r\n              <Button onClick={onClose}>Cancel</Button>\r\n            </ModalFooter>\r\n          </ModalContent>\r\n\r\n          <ModalFooter>\r\n            <Button onClick={onClose}>Cancel</Button>\r\n          </ModalFooter>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={onOpen}>Invite a Contact</Button>\r\n\r\n      <Modal closeOnOverlayClick={false} isOpen={isOpen} onClose={onClose}>\r\n        <ModalOverlay />\r\n        <ModalContent>\r\n          <ModalHeader>Invite a Contact</ModalHeader>\r\n\r\n          <Formik\r\n            initialValues={{ name: \"\", email: \"\" }}\r\n            onSubmit={async (values, { setErrors }) => {\r\n              const response = await createSub({\r\n                variables: { input: values },\r\n                update: (cache, { data }) => {\r\n                  if (!data?.createSub.errors) {\r\n                    cache.evict({ fieldName: \"subs:{}\" });\r\n                  }\r\n                },\r\n              });\r\n\r\n              if (response.data?.createSub.errors) {\r\n                setErrors(toErrorMap(response.data.createSub.errors));\r\n                console.log(response.data.createSub.errors);\r\n              } else if (response.data?.createSub.sub) {\r\n              }\r\n            }}\r\n          >\r\n            {({ isSubmitting }) => {\r\n              return (\r\n                <Form>\r\n                  {isSubmitting ? null : <ModalCloseButton />}\r\n                  <ModalBody pb={6}>\r\n                    <InputField name=\"name\" placeholder=\"Name\" label=\"Name\" />\r\n                    <Box mt={4}>\r\n                      <InputField\r\n                        name=\"email\"\r\n                        placeholder=\"email\"\r\n                        label=\"Email\"\r\n                      />\r\n                    </Box>\r\n                  </ModalBody>\r\n\r\n                  <ModalFooter>\r\n                    <Button\r\n                      mr={2}\r\n                      type=\"submit\"\r\n                      isLoading={isSubmitting}\r\n                      background=\"blue\"\r\n                      color=\"white\"\r\n                    >\r\n                      Send Invite\r\n                    </Button>\r\n\r\n                    <Button isLoading={isSubmitting} onClick={onClose}>\r\n                      Cancel\r\n                    </Button>\r\n                  </ModalFooter>\r\n                </Form>\r\n              );\r\n            }}\r\n          </Formik>\r\n        </ModalContent>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withApollo({ ssr: false })(InviteSubscriber);\r\n"]},"metadata":{},"sourceType":"module"}