{"ast":null,"code":"var _jsxFileName = \"D:\\\\Development\\\\QA\\\\OldQA\\\\web\\\\src\\\\components\\\\Subscriber\\\\index.tsx\";\nvar __jsx = React.createElement;\nimport { Table, Thead, Tbody, Tr, Th, Td, Button, Flex, Box } from \"@chakra-ui/react\";\nimport { useProfileQuery, useSubsQuery } from \"../../generated/graphql\";\nimport { withApollo } from \"../../utils/withApollo\";\nimport { DeleteSubButtons } from \"./DeleteSubcriber\";\nimport { InviteLink } from \"./InviteLink\";\nimport SubsModal from \"./EditSubscriber\";\nimport InviteSubscriber from \"./InviteSubscriber\";\nimport { useIsAuth } from \"../../utils/useIsAuth\";\nimport React from \"react\";\nimport { DocImport } from \"./docImport\";\n\nconst Subscribers = () => {\n  var _me$data, _me$data$me;\n\n  useIsAuth();\n  const me = useProfileQuery();\n  const {\n    data,\n    error,\n    loading,\n    fetchMore,\n    variables\n  } = useSubsQuery({\n    variables: {\n      limit: 15,\n      cursor: null\n    },\n    notifyOnNetworkStatusChange: true\n  });\n\n  if (!loading && !data) {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }\n    }, \"you got query failed for some reason\"), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }\n    }, error === null || error === void 0 ? void 0 : error.message));\n  } else {}\n\n  const freeChecker = !loading && ((_me$data = me.data) === null || _me$data === void 0 ? void 0 : (_me$data$me = _me$data.me) === null || _me$data$me === void 0 ? void 0 : _me$data$me.customerType) === \"free-trial\";\n  const subLength = freeChecker ? !loading ? data.subs.subs.length >= 5 : null : null;\n  return __jsx(React.Fragment, null, !data && loading ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, \"loading...\") : __jsx(React.Fragment, null, __jsx(Flex, {\n    mb: 2,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, __jsx(InviteSubscriber, {\n    subLength: subLength,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 14\n    }\n  }), __jsx(DocImport, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), !freeChecker && __jsx(InviteLink, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 30\n    }\n  })), __jsx(Box, {\n    borderWidth: \"1px\",\n    borderRadius: \"lg\",\n    mt: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, __jsx(Table, {\n    variant: \"simple\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, __jsx(Thead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, __jsx(Tr, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, __jsx(Th, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }\n  }, \"Name\"), __jsx(Th, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 19\n    }\n  }, \"Email\"), __jsx(Th, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }\n  }, \"Active?\"), __jsx(Th, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 19\n    }\n  }), __jsx(Th, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 19\n    }\n  }))), __jsx(Tbody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, data.subs.subs.map(s => !s ? null : __jsx(Tr, {\n    key: s.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, __jsx(Td, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 23\n    }\n  }, s.name), __jsx(Td, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 23\n    }\n  }, s.email), __jsx(Td, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 23\n    }\n  }, s.subscribed !== true ? \"Not Active\" : \"Active\"), __jsx(Td, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 23\n    }\n  }, __jsx(SubsModal, {\n    id: s.id,\n    name: s.name,\n    email: s.email,\n    subscribed: s.subscribed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  })), __jsx(Td, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 23\n    }\n  }, __jsx(DeleteSubButtons, {\n    id: s.id,\n    creatorId: s.creator.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  })))))))), data && data.subs.hasMore ? __jsx(Flex, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    onClick: () => {\n      fetchMore({\n        variables: {\n          limit: variables === null || variables === void 0 ? void 0 : variables.limit,\n          cursor: data.subs.subs[data.subs.subs.length - 1].createdAt\n        }\n      });\n    },\n    isLoading: loading,\n    m: \"auto\",\n    my: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, \"load more\")) : null);\n};\n\nexport default withApollo({\n  ssr: false\n})(Subscribers);","map":{"version":3,"sources":["D:/Development/QA/OldQA/web/src/components/Subscriber/index.tsx"],"names":["Table","Thead","Tbody","Tr","Th","Td","Button","Flex","Box","useProfileQuery","useSubsQuery","withApollo","DeleteSubButtons","InviteLink","SubsModal","InviteSubscriber","useIsAuth","React","DocImport","Subscribers","me","data","error","loading","fetchMore","variables","limit","cursor","notifyOnNetworkStatusChange","message","freeChecker","customerType","subLength","subs","length","map","s","id","name","email","subscribed","creator","hasMore","createdAt","ssr"],"mappings":"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","sourcesContent":["import {\r\n  Table,\r\n  Thead,\r\n  Tbody,\r\n  Tr,\r\n  Th,\r\n  Td,\r\n  Button,\r\n  Flex,\r\n  Box,\r\n} from \"@chakra-ui/react\";\r\nimport { useProfileQuery, useSubsQuery } from \"../../generated/graphql\";\r\nimport { withApollo } from \"../../utils/withApollo\";\r\nimport { DeleteSubButtons } from \"./DeleteSubcriber\";\r\nimport { InviteLink } from \"./InviteLink\";\r\nimport SubsModal from \"./EditSubscriber\";\r\nimport InviteSubscriber from \"./InviteSubscriber\";\r\nimport { useIsAuth } from \"../../utils/useIsAuth\";\r\nimport React from \"react\";\r\nimport { DocImport } from \"./docImport\";\r\n\r\nconst Subscribers = () => {\r\n  useIsAuth();\r\n  const me = useProfileQuery();\r\n\r\n  const { data, error, loading, fetchMore, variables } = useSubsQuery({\r\n    variables: {\r\n      limit: 15,\r\n      cursor: null,\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n  });\r\n\r\n  if (!loading && !data) {\r\n    return (\r\n      <div>\r\n        <div>you got query failed for some reason</div>\r\n        <div>{error?.message}</div>\r\n      </div>\r\n    );\r\n  } else {\r\n  }\r\n  const freeChecker = !loading && me.data?.me?.customerType === \"free-trial\";\r\n  const subLength = freeChecker\r\n    ? !loading\r\n      ? data!.subs!.subs.length >= 5\r\n      : null\r\n    : null;\r\n\r\n  return (\r\n    <>\r\n      {!data && loading ? (\r\n        <div>loading...</div>\r\n      ) : (\r\n        <>\r\n          <Flex mb={2} align=\"center\">\r\n            {<InviteSubscriber subLength={subLength} />}\r\n            <DocImport />\r\n            {!freeChecker && <InviteLink />}\r\n          </Flex>\r\n          <Box borderWidth=\"1px\" borderRadius=\"lg\" mt={5}>\r\n            <Table variant=\"simple\">\r\n              <Thead>\r\n                <Tr>\r\n                  <Th>Name</Th>\r\n                  <Th>Email</Th>\r\n                  <Th>Active?</Th>\r\n                  <Th></Th>\r\n                  <Th></Th>\r\n                </Tr>\r\n              </Thead>\r\n              <Tbody>\r\n                {data!.subs.subs.map((s) =>\r\n                  !s ? null : (\r\n                    <Tr key={s.id}>\r\n                      <Td>{s.name}</Td>\r\n                      <Td>{s.email}</Td>\r\n                      <Td>{s.subscribed !== true ? \"Not Active\" : \"Active\"}</Td>\r\n                      <Td>\r\n                        <SubsModal\r\n                          id={s.id}\r\n                          name={s.name}\r\n                          email={s.email}\r\n                          subscribed={s.subscribed}\r\n                        />\r\n                      </Td>\r\n                      <Td>\r\n                        <DeleteSubButtons id={s.id} creatorId={s.creator.id} />\r\n                      </Td>\r\n                    </Tr>\r\n                  )\r\n                )}\r\n              </Tbody>\r\n            </Table>\r\n          </Box>\r\n        </>\r\n      )}\r\n      {data && data.subs.hasMore ? (\r\n        <Flex>\r\n          <Button\r\n            onClick={() => {\r\n              fetchMore({\r\n                variables: {\r\n                  limit: variables?.limit,\r\n                  cursor: data.subs.subs[data.subs.subs.length - 1].createdAt,\r\n                },\r\n              });\r\n            }}\r\n            isLoading={loading}\r\n            m=\"auto\"\r\n            my={8}\r\n          >\r\n            load more\r\n          </Button>\r\n        </Flex>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withApollo({ ssr: false })(Subscribers);\r\n"]},"metadata":{},"sourceType":"module"}