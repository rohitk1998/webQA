{"ast":null,"code":"var _jsxFileName = \"D:\\\\Development\\\\QA\\\\OldQA\\\\web\\\\src\\\\components\\\\UserMailActivity\\\\index.tsx\";\nvar __jsx = React.createElement;\nimport { useMailActivityByIdQuery, useAllsubsIdQuery } from \"../../generated/graphql\";\nimport { withApollo } from \"../../utils/withApollo\";\nimport { useIsAuth } from \"../../utils/useIsAuth\";\nimport React, { useState, useEffect } from \"react\";\nimport ActivityCard from \"../Mail_Activity/ActivityCard\";\nimport ActivityChart from \"../Mail_Activity/ActivityChart\";\n\nconst UsersMailsActivities = ({\n  id\n}) => {\n  var _subsCount$data, _subsCount$data2, _subsCount$data3, _subsCount$data4;\n\n  useIsAuth();\n  const {\n    0: Delivered,\n    1: setDelivered\n  } = useState(0);\n  const {\n    0: Opened,\n    1: setOpened\n  } = useState(0);\n  const {\n    0: Clicked,\n    1: setClicked\n  } = useState(0);\n  const {\n    0: Bounces,\n    1: setBounces\n  } = useState(0);\n  const {\n    0: SpamReports,\n    1: setSpamReports\n  } = useState(0);\n  useIsAuth();\n  const {\n    data,\n    error,\n    loading,\n    fetchMore,\n    variables\n  } = useMailActivityByIdQuery({\n    variables: {\n      id: id\n    },\n    notifyOnNetworkStatusChange: true\n  });\n  const subsCount = useAllsubsIdQuery({\n    variables: {\n      Id: id\n    },\n    notifyOnNetworkStatusChange: true\n  });\n\n  if (!loading && !data) {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }, \"you got query failed for some reason\"), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }\n    }, error === null || error === void 0 ? void 0 : error.message));\n  }\n\n  useEffect(() => {\n    if (data) {\n      const mailActivity = data.mailActivityById.mailActivity;\n      let Delivered = [];\n      let Opened = [];\n      let Clicked = [];\n      let Bounces = [];\n      let SpamReports = [];\n      mailActivity.map(mail => {\n        Opened.push(mail.open_count);\n        Clicked.push(mail.clicks_count);\n\n        if (mail.Status === \"delivered\") {\n          Delivered.push(mail);\n        }\n\n        if (mail.Status === \"bounce\") {\n          Bounces.push(mail);\n        }\n\n        if (mail.Status === \"spamreport\") {\n          SpamReports.push(mail);\n        }\n      });\n      setDelivered(Delivered.length);\n      setOpened(Opened.reduce((a, b) => a + b, 0));\n      setClicked(Clicked.reduce((a, b) => a + b, 0));\n      setBounces(Bounces.length);\n      setSpamReports(SpamReports.length);\n    }\n  });\n\n  if (data) {\n    console.log(Delivered, Opened, Clicked, Bounces, SpamReports);\n  }\n\n  return __jsx(React.Fragment, null, !data ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \"loading...\") : __jsx(React.Fragment, null, __jsx(ActivityCard, {\n    Delivered: Delivered,\n    Opened: Opened,\n    Clicked: Clicked,\n    Bounces: Bounces,\n    SpamReports: SpamReports,\n    ActiveCount: (_subsCount$data = subsCount.data) === null || _subsCount$data === void 0 ? void 0 : _subsCount$data.AllsubsId.ActiveCount,\n    NonActiveCount: (_subsCount$data2 = subsCount.data) === null || _subsCount$data2 === void 0 ? void 0 : _subsCount$data2.AllsubsId.NonActiveCount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }), __jsx(ActivityChart, {\n    Delivered: Delivered,\n    Opened: Opened,\n    Clicked: Clicked,\n    Bounces: Bounces,\n    SpamReports: SpamReports,\n    ActiveCount: (_subsCount$data3 = subsCount.data) === null || _subsCount$data3 === void 0 ? void 0 : _subsCount$data3.AllsubsId.ActiveCount,\n    NonActiveCount: (_subsCount$data4 = subsCount.data) === null || _subsCount$data4 === void 0 ? void 0 : _subsCount$data4.AllsubsId.NonActiveCount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default withApollo({\n  ssr: false\n})(UsersMailsActivities);","map":{"version":3,"sources":["D:/Development/QA/OldQA/web/src/components/UserMailActivity/index.tsx"],"names":["useMailActivityByIdQuery","useAllsubsIdQuery","withApollo","useIsAuth","React","useState","useEffect","ActivityCard","ActivityChart","UsersMailsActivities","id","Delivered","setDelivered","Opened","setOpened","Clicked","setClicked","Bounces","setBounces","SpamReports","setSpamReports","data","error","loading","fetchMore","variables","notifyOnNetworkStatusChange","subsCount","Id","message","mailActivity","mailActivityById","map","mail","push","open_count","clicks_count","Status","length","reduce","a","b","console","log","AllsubsId","ActiveCount","NonActiveCount","ssr"],"mappings":"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","sourcesContent":["import {\r\n  useMailActivityByIdQuery,\r\n  useAllsubsIdQuery,\r\n} from \"../../generated/graphql\";\r\nimport { withApollo } from \"../../utils/withApollo\";\r\nimport { useIsAuth } from \"../../utils/useIsAuth\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport ActivityCard from \"../Mail_Activity/ActivityCard\";\r\nimport ActivityChart from \"../Mail_Activity/ActivityChart\";\r\n\r\ninterface UserActivityProps {\r\n  id: number;\r\n}\r\n\r\nconst UsersMailsActivities: React.FC<UserActivityProps> = ({ id }) => {\r\n  useIsAuth();\r\n  const [Delivered, setDelivered] = useState(0);\r\n  const [Opened, setOpened] = useState(0);\r\n  const [Clicked, setClicked] = useState(0);\r\n  const [Bounces, setBounces] = useState(0);\r\n  const [SpamReports, setSpamReports] = useState(0);\r\n  useIsAuth();\r\n  const {\r\n    data,\r\n    error,\r\n    loading,\r\n    fetchMore,\r\n    variables,\r\n  } = useMailActivityByIdQuery({\r\n    variables: {\r\n      id: id,\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n  });\r\n\r\n  const subsCount = useAllsubsIdQuery({\r\n    variables: {\r\n      Id: id,\r\n    },\r\n    notifyOnNetworkStatusChange: true,\r\n  });\r\n\r\n  if (!loading && !data) {\r\n    return (\r\n      <div>\r\n        <div>you got query failed for some reason</div>\r\n        <div>{error?.message}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      const mailActivity: any = data!.mailActivityById.mailActivity;\r\n      let Delivered: any = [];\r\n      let Opened: any = [];\r\n      let Clicked: any = [];\r\n      let Bounces: any = [];\r\n      let SpamReports: any = [];\r\n\r\n      mailActivity.map((mail: any) => {\r\n        Opened.push(mail.open_count);\r\n        Clicked.push(mail.clicks_count);\r\n\r\n        if (mail.Status === \"delivered\") {\r\n          Delivered.push(mail);\r\n        }\r\n        if (mail.Status === \"bounce\") {\r\n          Bounces.push(mail);\r\n        }\r\n        if (mail.Status === \"spamreport\") {\r\n          SpamReports.push(mail);\r\n        }\r\n      });\r\n      setDelivered(Delivered.length);\r\n      setOpened(Opened.reduce((a: any, b: any) => a + b, 0));\r\n      setClicked(Clicked.reduce((a: any, b: any) => a + b, 0));\r\n      setBounces(Bounces.length);\r\n      setSpamReports(SpamReports.length);\r\n    }\r\n  });\r\n  if (data) {\r\n    console.log(Delivered, Opened, Clicked, Bounces, SpamReports);\r\n  }\r\n  return (\r\n    <>\r\n      {!data ? (\r\n        <div>loading...</div>\r\n      ) : (\r\n        <>\r\n          <ActivityCard\r\n            Delivered={Delivered}\r\n            Opened={Opened}\r\n            Clicked={Clicked}\r\n            Bounces={Bounces}\r\n            SpamReports={SpamReports}\r\n            ActiveCount={subsCount.data?.AllsubsId.ActiveCount}\r\n            NonActiveCount={subsCount.data?.AllsubsId.NonActiveCount}\r\n          />\r\n\r\n          <ActivityChart\r\n            Delivered={Delivered}\r\n            Opened={Opened}\r\n            Clicked={Clicked}\r\n            Bounces={Bounces}\r\n            SpamReports={SpamReports}\r\n            ActiveCount={subsCount.data?.AllsubsId.ActiveCount}\r\n            NonActiveCount={subsCount.data?.AllsubsId.NonActiveCount}\r\n          />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withApollo({ ssr: false })(UsersMailsActivities);\r\n"]},"metadata":{},"sourceType":"module"}